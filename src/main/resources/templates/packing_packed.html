<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Laundry-Quoll</title>

    <!-- Bootstrap core CSS -->
    <link th:href="@{/Resources/dashgumfree_v2/Theme/assets/css/bootstrap.css}" rel="stylesheet">
    <!--external css-->
    <link th:href="@{/Resources/dashgumfree_v2/Theme/assets/font-awesome/css/font-awesome.css}" rel="stylesheet" />
    <link th:href="@{/Resources/awesome-bootstrap-checkbox-master/awesome-bootstrap-checkbox.css}" rel="stylesheet" />

    <!-- Custom styles for this template -->
    <link th:href="@{/Resources/dashgumfree_v2/Theme/assets/css/style.css}" rel="stylesheet">
    <link th:href="@{/Resources/dashgumfree_v2/Theme/assets/css/style-responsive.css}" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/Resources/dashgumfree_v2/Theme/assets/css/to-do.css}">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script th:src="@{https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js}"></script>
      <script th:src="@{https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js}"></script>
    <![endif]-->
  </head>

  <body>

  <section id="container" >
      <!-- **********************************************************************************************************************************************************
      TOP BAR CONTENT & NOTIFICATIONS
      *********************************************************************************************************************************************************** -->
      <!--header start-->
      <header class="header black-bg">
              <div class="sidebar-toggle-box">
                  <div class="fa fa-bars tooltips" style="color:white" data-placement="right" data-original-title="Toggle Navigation"></div>
              </div>
            <!--logo start-->
            <a th:href="@{unpacked_all}" class="logo"><b>COMPLETE WORKWEAR</b></a>
            <!--logo end-->
            <div class="top-menu">
            	<ul class="nav pull-right top-menu">
                  <li><a class="logout" th:href="@{/logout}">Logout</a></li>
            	</ul>
            </div>
        </header>
      <!--header end-->

      <!-- **********************************************************************************************************************************************************
      MAIN SIDEBAR MENU
      *********************************************************************************************************************************************************** -->
      <!--sidebar start-->
      <aside>
          <div id="sidebar"  class="nav-collapse ">
              <!-- sidebar menu start-->
              <ul class="sidebar-menu" id="nav-accordion">

              	  <p class="centered"><img th:src="@{/Resources/dashgumfree_v2/Theme/assets/img/ui-sam.jpg}" class="img-circle" width="60"></a></p>
              	  <h5 class="centered">Packing Staff</h5>

              	<li class="mt">
                      <a th:href="@{unpacked_all}">
                         <i class="fa fa-tasks"></i>
                          <span>Unpacked Orders</span>
                      </a>
                  </li>
                  
                  <li class="mt">
                      <a  th:href="@{partially_all}">
                         <i class="fa fa-warning"></i>
                          <span>Partially Packed Orders</span>
                      </a>
                  </li>
                  
                  <li class="mt">
                      <a class="active" th:href="@{packed_all}">
                          <i class="fa fa-check-square-o "></i>
                          <span>Packed Orders</span>
                      </a>
                  </li>

              </ul>
              <!-- sidebar menu end-->
          </div>
      </aside>
      <!--sidebar end-->

      <!-- **********************************************************************************************************************************************************
      MAIN CONTENT
      *********************************************************************************************************************************************************** -->
      <!--main content start-->
      <section id="main-content">
          <section class="wrapper site-min-height">
          	<h3><i class="fa fa-angle-right"></i> Packed Orders</h3>
			
			<input type="text" th:value="${orderid}" id="orderid" hidden="hidden">
			
			<div class="col-lg-12">
				<div class="form-panel">
					<form class="form-horizontal style-form" method="get">
						<div class="form-group">
			                <label class="col-sm-2 control-label">Company</label>
			                <label class="control-label" id="company"></label>
			            </div>
			            <div class="form-group">
		                   <label class="col-sm-2 control-label">Pick Up Date</label>
		                   <label class="control-label" id="pickupdate"></label>
		                </div>
		                <div class="form-group">
		                   <label class="col-sm-2 control-label">Packed Date</label>
		                   <label class="control-label" id="packeddate"></label>
		                </div>
		                <div class="form-group">
                                <label class="col-sm-2 control-label">Items</label>
                                <div class="col-sm-6">
	                                <table class="table  table-bordered" id="itemtable">  
									    <tr>  
									        <th style="text-align:left" width="200">Name</th>  
									        <th style="text-align:left" width="200">Picked Quantity</th>
									        <th style="text-align:left" width="200">Packed Quantity</th>     
									    </tr>  
									</table>
								</div>
                         </div>
                         <div class="form-group">
		                   <label class="col-sm-2 control-label">Notes</label>
		                   <label class="control-label" id="notes"></label>
		                </div>
                        <div class="btn-group btn-group-justified">
	                        <div class="btn-group">
	                          <a th:href="@{packed_all}"><button type="button" class="btn btn-info">Return</button></a>
	                        </div>
                        </div>
					</form>
				</div>	
			</div>

		</section><! --/wrapper -->
      </section><!-- /MAIN CONTENT -->

      <!--main content end-->
  </section>

    <!-- js placed at the end of the document so the pages load faster -->
    <script th:src="@{/Resources/dashgumfree_v2/Theme/assets/js/jquery.js}"></script>
    <script th:src="@{/Resources/dashgumfree_v2/Theme/assets/js/bootstrap.min.js}"></script>
    <script th:src="@{/Resources/dashgumfree_v2/Theme/assets/js/jquery-ui-1.9.2.custom.min.js}"></script>
    <script th:src="@{/Resources/dashgumfree_v2/Theme/assets/js/jquery.ui.touch-punch.min.js}"></script>
    <script class="include" type="text/javascript" th:src="@{/Resources/dashgumfree_v2/Theme/assets/js/jquery.dcjqaccordion.2.7.js}"></script>
    <script th:src="@{/Resources/dashgumfree_v2/Theme/assets/js/jquery.scrollTo.min.js}"></script>
    <script th:src="@{/Resources/dashgumfree_v2/Theme/assets/js/jquery.nicescroll.js}" type="text/javascript"></script>


    <!--common script for all pages-->
    <script th:src="@{/Resources/dashgumfree_v2/Theme/assets/js/common-scripts.js}"></script>

    <!--script for this page-->
	<script th:src="@{http://code.jquery.com/ui/1.10.3/jquery-ui.js}"></script>
    <script th:src="@{/Resources/dashgumfree_v2/Theme/assets/js/tasks.js}" type="text/javascript"></script>
    
    <script type="text/javascript">
    
    $(document).ready(function() {
  		
		 var param = "orderid=" + document.getElementById("orderid").value;
		
		 $.ajax({
          type: "GET",
          url: 'order/getOrderDetail',
          cache : false, 
          data: param,
          dataType: "json",
          success: function(result) {
       	   
       	 	document.getElementById("company").innerHTML = result.order.company.name;
       		document.getElementById("pickupdate").innerHTML = getMyDate(result.order.realpickupdate);
       		document.getElementById("packeddate").innerHTML = getMyDate(result.order.packingdate);
       		document.getElementById("notes").innerHTML = result.order.notes;
        		var items = result.items;
        		for(var i = 0; i < items.length; i++){
        			var table = $("#itemtable");
            		var tr= $("<tr>" +  
            	            "<td  style='text-align:left;'>"+items[i].garment.fullname+"</td>" +  
            	            "<td  style='text-align:left;'>"+items[i].pickupnumber+"</td>" +
            	            "<td  style='text-align:left;'>"+items[i].packnumber+"</td>");  
           	    table.append(tr);
        	 	}
        		
          },
          error: function(XMLHttpRequest, textStatus, errorThrown) {
              alert("Search Fail");
          }
      });
	} );
    
    function getMyDate(str){  
    	if (str == ""||str == null) {
      		return "";
      	} else {
      		var oDate = new Date(str),  
              oYear = oDate.getFullYear(),  
              oMonth = oDate.getMonth()+1,  
              oDay = oDate.getDate(),   
              oTime = getzf(oMonth) +'/'+ getzf(oDay) + '/' + oYear;
              return oTime;
      	}
    };  
    
    function getzf(num){  
        if(parseInt(num) < 10){  
            num = '0'+num;  
        }  
        return num;  
    }  
    
    </script>
	
  </body>
</html>
